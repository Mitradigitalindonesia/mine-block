name: ‚õèÔ∏è Auto Mine Block (10x per minute)

on:
  schedule:
    - cron: "*/1 * * * *"  # Setiap 1 menit
  workflow_dispatch:  # Bisa dijalankan manual juga

jobs:
  auto-mine:
    runs-on: ubuntu-latest
    steps:
      - name: Mine 10 blocks via Supabase Edge Function
        run: |
          for i in {1..10}
          do
            echo "üîÅ Mining block $i..."
            curl -s -X POST "${{ secrets.MINE_FUNCTION_URL }}" \
              -H "Authorization: Bearer ${{ secrets.MINE_SECRET_KEY }}" \
              -H "Content-Type: application/json"
            echo "‚úÖ Block $i complete"
            sleep 1  # beri jeda agar server tidak overload
          done
